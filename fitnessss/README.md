# Информационная система "Фитнес-центр"

Веб-приложение для управления фитнес-центром, включающее регистрацию пользователей, управление услугами, тренерами, абонементами и заказами.

## Описание проекта

Система предназначена для:
- Регистрации и авторизации пользователей
- Просмотра услуг, тренеров и абонементов
- Добавления товаров в корзину и оформления заказов
- Онлайн-оплаты заказов
- Управления системой администратором (CRUD операции)
- Просмотра истории заказов и активных подписок
- Управления расписанием и ценами
- Редактирования профиля пользователя

## Технологии

- **Backend**: PHP 7.4+
- **Frontend**: HTML5, CSS3, JavaScript, Bootstrap 5
- **База данных**: MySQL 5.7+
- **Сервер**: Apache/Nginx с PHP

## Структура проекта

```
fitnessss/
├── admin/              # Админ-панель
│   ├── index.php      # Главная страница админки
│   ├── users.php      # Управление пользователями
│   ├── services.php   # Управление услугами
│   ├── trainers.php   # Управление тренерами
│   ├── subscriptions.php # Управление абонементами
│   ├── orders.php     # Управление заказами
│   └── schedule.php   # Редактирование расписания
├── api/               # API endpoints
│   ├── contact.php              # Обработка контактной формы
│   ├── get_order_details.php    # Получение деталей заказа
│   └── process_payment.php      # Обработка платежа
├── assets/            # Статические файлы
│   ├── css/
│   │   └── style.css
│   └── js/
│       └── main.js
├── config/            # Конфигурация
│   ├── config.php
│   └── database.php
├── database/          # SQL схемы
│   └── schema.sql
├── includes/          # Общие компоненты
│   ├── header.php
│   └── footer.php
├── отчет/             # Отчеты и документация
│   └── ОТЧЕТ_О_САЙТЕ.md  # Подробный отчет о сайте
├── tests/             # Тесты
│   └── test_cases.md
├── index.php          # Главная страница
├── login.php          # Страница входа
├── register.php       # Страница регистрации
├── services.php       # Страница услуг
├── trainers.php       # Страница тренеров
├── subscriptions.php  # Страница абонементов
├── faq.php            # Часто задаваемые вопросы
├── cart.php           # Корзина
├── checkout.php       # Оформление заказа и оплата
├── orders.php         # История заказов (Мои заказы)
├── profile.php        # Профиль пользователя
├── logout.php         # Выход из системы
└── README.md          # Документация
```

## Установка и настройка

### Требования

- PHP 7.4 или выше
- MySQL 5.7 или выше
- Apache/Nginx с поддержкой PHP
- Расширения PHP: PDO, PDO_MySQL, mbstring

### Шаги установки

1. **Получение проекта**
   
   **Вариант A: Проект размещен на GitHub/GitLab/Bitbucket**
   
   Если проект уже загружен на платформу управления версиями (GitHub, GitLab и т.д.):
   - **URL репозитория** - это адрес вашего репозитория на платформе. 
     Например: `https://github.com/ваш_username/fitness-center.git`
     Чтобы получить URL: откройте страницу репозитория на GitHub/GitLab и нажмите кнопку "Code" или "Clone"
   - **Имя директории проекта** - это название папки, в которую будет клонирован проект (обычно совпадает с названием репозитория)
   
   ```bash
   git clone https://github.com/ваш_username/fitness-center.git
   cd fitness-center
   ```
   
   **Вариант B: Проект уже находится на вашем компьютере**
   
   Если проект уже находится локально (например, в директории `fitnessss`):
   - **Имя директории проекта** - это название папки, где находится проект
     Например: `fitnessss`, `fitness-center`, `my-project` и т.д.
     Можно узнать, выполнив команду `pwd` или посмотрев путь в проводнике
   
   ```bash
   cd fitnessss
   ```
   
   Или перейдите в директорию проекта через проводник Windows.

2. **Настройка базы данных**
   
   Создайте базу данных MySQL и импортируйте схему:
   ```bash
   mysql -u root -p < database/schema.sql
   ```
   
   Или выполните SQL-скрипт вручную через phpMyAdmin или другой клиент MySQL.

3. **Настройка конфигурации**
   
   Откройте файл `config/database.php` и измените параметры подключения:
   ```php
   define('DB_HOST', 'localhost');
   define('DB_NAME', 'fitness_center');
   define('DB_USER', 'your_username');
   define('DB_PASS', 'your_password');
   ```

4. **Настройка веб-сервера**
   
   Для Apache: поместите проект в папку `htdocs` или настройте виртуальный хост.
   
   Для Nginx: настройте конфигурацию для обработки PHP-файлов.

5. **Проверка прав доступа**
   
   Убедитесь, что веб-сервер имеет права на чтение всех файлов проекта.

## Запуск проекта

1. Запустите веб-сервер (если используете встроенный PHP сервер):
   ```bash
   php -S localhost:8000
   ```

2. Откройте браузер и перейдите по адресу:
   ```
   http://localhost:8000
   ```

3. Используйте тестовые учетные данные:
   - **Администратор**: 
     - Логин: `admin`
     - Пароль: `password`
   - **Пользователь**: 
     - Логин: `user1`
     - Пароль: `password`

## Использование

### Для пользователей

1. **Регистрация**: Зарегистрируйтесь на сайте, заполнив форму регистрации
2. **Вход**: Войдите в систему с вашими учетными данными
3. **Просмотр услуг**: Перейдите в раздел "Услуги" для просмотра доступных услуг
   - Фильтрация по категориям и тренерам
   - Добавление услуг в корзину
4. **Выбор тренера**: Посмотрите информацию о тренерах в разделе "Тренеры"
   - Специализация, опыт работы, расписание
5. **Выбор абонемента**: Просмотрите доступные абонементы в разделе "Абонементы"
   - Информация о сроках действия и включенных услугах
6. **Корзина**: Управление товарами в корзине
   - Изменение количества
   - Удаление товаров
   - Просмотр общей суммы
7. **Оформление заказа**: Оформление заказа с последующей оплатой
   - Заполнение данных плательщика
   - Ввод данных карты
   - Подтверждение оплаты
8. **Мои заказы**: Просмотр истории всех заказов
   - Детали каждого заказа
   - Статусы заказов и оплаты
9. **Профиль**: Управление личными данными
   - Редактирование email, имени, телефона
   - Смена пароля
   - Просмотр активных подписок
10. **Активные подписки**: Отображаются в шапке сайта рядом с ником пользователя

### Для администраторов

1. **Вход в админ-панель**: Войдите как администратор (автоматическое перенаправление)
2. **Панель управления**: Просмотр статистики
   - Количество пользователей
   - Количество заказов
   - Количество активных услуг
   - Общая выручка
3. **Управление пользователями**: Полный CRUD функционал
   - Просмотр всех пользователей
   - Создание новых пользователей
   - Редактирование данных (логин, email, пароль, роль)
   - Удаление пользователей
4. **Управление услугами**: CRUD операции с услугами
   - Создание и редактирование услуг
   - Изменение цен, категорий, расписания
   - Привязка к тренерам
   - Активация/деактивация услуг
5. **Управление тренерами**: Управление информацией о тренерах
   - Добавление и редактирование тренеров
   - Указание специализации и опыта
   - Управление расписанием работы
6. **Управление абонементами**: Создание и редактирование абонементов
   - Настройка цен и сроков действия
   - Указание количества посещений
   - Управление включенными услугами
7. **Управление заказами**: Полный контроль над заказами
   - Просмотр всех заказов в системе
   - Просмотр деталей заказов
   - Изменение статусов заказов (pending, confirmed, cancelled, completed)
   - Изменение статусов оплаты (unpaid, paid, refunded)
8. **Редактирование расписания**: Управление расписанием услуг и тренеров

## База данных

База данных включает следующие таблицы:
- `users` - пользователи системы (логин, email, пароль, роль)
- `trainers` - тренеры (ФИО, специализация, опыт, контакты)
- `services` - услуги (название, описание, цена, категория, тренер)
- `subscriptions` - типы абонементов (название, цена, срок действия, посещения)
- `orders` - заказы пользователей (статус, оплата, сумма)
- `order_items` - элементы заказов (товары/услуги в заказе)
- `user_subscriptions` - активные абонементы пользователей (даты действия, использованные посещения)

Подробная схема базы данных описана в файле `database/schema.sql`.

**Особенности**:
- Автоматическое создание активных подписок при оплате абонементов
- Отслеживание статусов заказов и оплаты
- Каскадное удаление связанных данных
- Индексы для оптимизации запросов

## Безопасность

- **SQL-инъекции**: Использование prepared statements (PDO) для всех запросов к БД
- **XSS**: Экранирование вывода через `htmlspecialchars()` и функция `sanitize()`
- **Пароли**: Хеширование с помощью `password_hash()` (bcrypt), никогда не хранятся в открытом виде
- **Авторизация**: Проверка прав доступа (`requireLogin()`, `requireAdmin()`) на всех защищенных страницах
- **Валидация**: Проверка данных на стороне клиента (JavaScript) и сервера (PHP)
- **Данные карт**: Данные карт НЕ сохраняются в БД, только последние 4 цифры для справки
- **Сессии**: Безопасное управление сессиями пользователей

## Тестирование

Результаты тестирования доступны в файле `tests/test_cases.md`.

Проведено:
- Функциональное тестирование
- Модульное тестирование
- Тестирование безопасности
- UI-тестирование

## Разработка

Для разработки и отладки рекомендуется использовать:
- IDE с поддержкой PHP (PHPStorm, VSCode)
- Инструменты отладки (Xdebug)
- Git для контроля версий

## Лицензия

Этот проект создан в учебных целях.

## Контакты

Для вопросов и предложений обращайтесь к разработчику.

## Дополнительная документация

Подробный отчет о сайте, его функциональности и возможностях для пользователей и администраторов находится в файле:
- **`отчет/ОТЧЕТ_О_САЙТЕ.md`** - Полное описание всех функций системы

## История изменений

### Версия 1.0 (2024)
- Первоначальный релиз
- Реализованы все основные функции
- Добавлена админ-панель со статистикой
- Создана база данных с 7 таблицами
- Реализована система оплаты заказов
- Автоматическое создание активных подписок при оплате
- Отображение активных подписок в интерфейсе
- Редактирование профиля пользователя
- Управление заказами и статусами
- Проведено тестирование
- Создан подробный отчет о системе

